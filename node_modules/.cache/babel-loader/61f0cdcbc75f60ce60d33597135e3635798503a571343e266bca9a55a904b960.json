{"ast":null,"code":"import{useEffect}from'react';export const TimelineMarker=_ref=>{let{adSegments}=_ref;useEffect(()=>{const injectTimelineMarkers=()=>{// Find the YouTube timeline container\nconst timeline=document.querySelector('.ytp-timed-markers-container');if(!timeline)return;// Clear any existing markers\nconst existingMarkers=document.querySelectorAll('.yt-adskip-marker');existingMarkers.forEach(marker=>marker.remove());// Get video duration\nconst video=document.querySelector('video');if(!video)return;const duration=video.duration;// Create markers for each ad segment\nadSegments.forEach(segment=>{const marker=document.createElement('div');marker.className='yt-adskip-marker';// Calculate position and width\nconst startPercent=segment.start/duration*100;const endPercent=segment.end/duration*100;const width=endPercent-startPercent;// Style the marker\nObject.assign(marker.style,{position:'absolute',left:`${startPercent}%`,width:`${width}%`,height:'100%',backgroundColor:'rgba(255, 0, 0, 0.5)',pointerEvents:'none',zIndex:'1'});timeline.appendChild(marker);});};const setupSkipButton=()=>{// Remove any existing skip buttons\nconst existingButton=document.querySelector('.yt-adskip-button');if(existingButton)existingButton.remove();// Create skip button (hidden by default)\nconst skipButton=document.createElement('button');skipButton.className='yt-adskip-button ytp-button';skipButton.textContent='Skip Ad Section';skipButton.style.display='none';// Style the button\nObject.assign(skipButton.style,{position:'absolute',bottom:'60px',right:'20px',backgroundColor:'rgba(0, 0, 0, 0.7)',color:'white',border:'none',padding:'10px 20px',cursor:'pointer',zIndex:'2147483647',borderRadius:'4px'});// Add to player\nconst player=document.querySelector('.html5-video-player');if(player)player.appendChild(skipButton);// Monitor video time and show/hide skip button\nconst video=document.querySelector('video');if(!video)return;const checkAdSegment=()=>{const currentTime=video.currentTime;const activeSegment=adSegments.find(segment=>currentTime>=segment.start&&currentTime<segment.end);if(activeSegment){skipButton.style.display='block';skipButton.onclick=()=>{video.currentTime=activeSegment.end;skipButton.style.display='none';};}else{skipButton.style.display='none';}};video.addEventListener('timeupdate',checkAdSegment);};// Initial setup\ninjectTimelineMarkers();setupSkipButton();// Re-run setup when navigating to a new video\nconst observer=new MutationObserver(()=>{injectTimelineMarkers();setupSkipButton();});observer.observe(document.body,{childList:true,subtree:true});return()=>{observer.disconnect();const video=document.querySelector('video');if(video){video.removeEventListener('timeupdate',()=>{});}};},[adSegments]);return null;};","map":{"version":3,"names":["useEffect","TimelineMarker","_ref","adSegments","injectTimelineMarkers","timeline","document","querySelector","existingMarkers","querySelectorAll","forEach","marker","remove","video","duration","segment","createElement","className","startPercent","start","endPercent","end","width","Object","assign","style","position","left","height","backgroundColor","pointerEvents","zIndex","appendChild","setupSkipButton","existingButton","skipButton","textContent","display","bottom","right","color","border","padding","cursor","borderRadius","player","checkAdSegment","currentTime","activeSegment","find","onclick","addEventListener","observer","MutationObserver","observe","body","childList","subtree","disconnect","removeEventListener"],"sources":["C:/Users/ADAM/YT-adskip/YT-adskip-extension/src/components/TimelineMarker.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { AdSegment } from '../utils/useVideoData';\r\n\r\ninterface TimelineMarkerProps {\r\n  adSegments: AdSegment[];\r\n}\r\n\r\nexport const TimelineMarker = ({ adSegments }: TimelineMarkerProps) => {\r\n  useEffect(() => {\r\n    const injectTimelineMarkers = () => {\r\n      // Find the YouTube timeline container\r\n      const timeline = document.querySelector('.ytp-timed-markers-container');\r\n      if (!timeline) return;\r\n\r\n      // Clear any existing markers\r\n      const existingMarkers = document.querySelectorAll('.yt-adskip-marker');\r\n      existingMarkers.forEach(marker => marker.remove());\r\n\r\n      // Get video duration\r\n      const video = document.querySelector('video');\r\n      if (!video) return;\r\n      const duration = video.duration;\r\n\r\n      // Create markers for each ad segment\r\n      adSegments.forEach(segment => {\r\n        const marker = document.createElement('div');\r\n        marker.className = 'yt-adskip-marker';\r\n        \r\n        // Calculate position and width\r\n        const startPercent = (segment.start / duration) * 100;\r\n        const endPercent = (segment.end / duration) * 100;\r\n        const width = endPercent - startPercent;\r\n        \r\n        // Style the marker\r\n        Object.assign(marker.style, {\r\n          position: 'absolute',\r\n          left: `${startPercent}%`,\r\n          width: `${width}%`,\r\n          height: '100%',\r\n          backgroundColor: 'rgba(255, 0, 0, 0.5)',\r\n          pointerEvents: 'none',\r\n          zIndex: '1'\r\n        });\r\n        \r\n        timeline.appendChild(marker);\r\n      });\r\n    };\r\n\r\n    const setupSkipButton = () => {\r\n      // Remove any existing skip buttons\r\n      const existingButton = document.querySelector('.yt-adskip-button');\r\n      if (existingButton) existingButton.remove();\r\n\r\n      // Create skip button (hidden by default)\r\n      const skipButton = document.createElement('button');\r\n      skipButton.className = 'yt-adskip-button ytp-button';\r\n      skipButton.textContent = 'Skip Ad Section';\r\n      skipButton.style.display = 'none';\r\n      \r\n      // Style the button\r\n      Object.assign(skipButton.style, {\r\n        position: 'absolute',\r\n        bottom: '60px',\r\n        right: '20px',\r\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n        color: 'white',\r\n        border: 'none',\r\n        padding: '10px 20px',\r\n        cursor: 'pointer',\r\n        zIndex: '2147483647',\r\n        borderRadius: '4px'\r\n      });\r\n\r\n      // Add to player\r\n      const player = document.querySelector('.html5-video-player');\r\n      if (player) player.appendChild(skipButton);\r\n\r\n      // Monitor video time and show/hide skip button\r\n      const video = document.querySelector('video');\r\n      if (!video) return;\r\n\r\n      const checkAdSegment = () => {\r\n        const currentTime = video.currentTime;\r\n        const activeSegment = adSegments.find(\r\n          segment => currentTime >= segment.start && currentTime < segment.end\r\n        );\r\n\r\n        if (activeSegment) {\r\n          skipButton.style.display = 'block';\r\n          skipButton.onclick = () => {\r\n            video.currentTime = activeSegment.end;\r\n            skipButton.style.display = 'none';\r\n          };\r\n        } else {\r\n          skipButton.style.display = 'none';\r\n        }\r\n      };\r\n\r\n      video.addEventListener('timeupdate', checkAdSegment);\r\n    };\r\n\r\n    // Initial setup\r\n    injectTimelineMarkers();\r\n    setupSkipButton();\r\n\r\n    // Re-run setup when navigating to a new video\r\n    const observer = new MutationObserver(() => {\r\n      injectTimelineMarkers();\r\n      setupSkipButton();\r\n    });\r\n\r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      const video = document.querySelector('video');\r\n      if (video) {\r\n        video.removeEventListener('timeupdate', () => {});\r\n      }\r\n    };\r\n  }, [adSegments]);\r\n\r\n  return null;\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}