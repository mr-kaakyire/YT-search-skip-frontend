{"ast":null,"code":"import React,{useMemo}from'react';import Paper from'@mui/material/Paper';import Typography from'@mui/material/Typography';import List from'@mui/material/List';import ListItem from'@mui/material/ListItem';import ListItemText from'@mui/material/ListItemText';import Button from'@mui/material/Button';import Box from'@mui/material/Box';import{formatTime}from'../utils/formatTime';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SearchResults=_ref=>{let{transcript,searchQuery,onTimestampClick}=_ref;const filteredResults=useMemo(()=>{if(!searchQuery)return[];const query=searchQuery.toLowerCase();const results=[];const contextSize=2;// Number of segments before and after for context\ntranscript.forEach((segment,index)=>{if(segment.text.toLowerCase().includes(query)){// Get surrounding segments for context\nconst start=Math.max(0,index-contextSize);const end=Math.min(transcript.length-1,index+contextSize);const contextSegments=transcript.slice(start,end+1);const context=contextSegments.map(s=>s.text).join(' ');results.push({...segment,context});}});return results;},[transcript,searchQuery]);if(!searchQuery){return/*#__PURE__*/_jsx(Paper,{elevation:0,sx:{p:2,border:'1px solid',borderColor:'divider',borderRadius:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",children:\"Enter a search term to find specific moments in the video\"})});}if(filteredResults.length===0){return/*#__PURE__*/_jsx(Paper,{elevation:0,sx:{p:2,border:'1px solid',borderColor:'divider',borderRadius:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",children:[\"No results found for \\\"\",searchQuery,\"\\\"\"]})});}return/*#__PURE__*/_jsx(Paper,{elevation:0,sx:{border:'1px solid',borderColor:'divider',borderRadius:2,maxHeight:400,overflow:'auto'},children:/*#__PURE__*/_jsx(List,{disablePadding:true,children:filteredResults.map((result,index)=>{const highlightedText=result.context.replace(new RegExp(searchQuery,'gi'),match=>`<mark>${match}</mark>`);return/*#__PURE__*/_jsxs(ListItem,{divider:index!==filteredResults.length-1,sx:{flexDirection:'column',alignItems:'flex-start'},children:[/*#__PURE__*/_jsx(Box,{sx:{width:'100%',mb:1},children:/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:highlightedText}}),primaryTypographyProps:{variant:'body2',sx:{'& mark':{bgcolor:'warning.light',color:'warning.contrastText',borderRadius:0.5,px:0.5}}}})}),/*#__PURE__*/_jsxs(Button,{size:\"small\",variant:\"text\",onClick:()=>onTimestampClick(result.offset),sx:{alignSelf:'flex-end'},children:[\"Jump to \",formatTime(result.offset)]})]},index);})})});};","map":{"version":3,"names":["React","useMemo","Paper","Typography","List","ListItem","ListItemText","Button","Box","formatTime","jsx","_jsx","jsxs","_jsxs","SearchResults","_ref","transcript","searchQuery","onTimestampClick","filteredResults","query","toLowerCase","results","contextSize","forEach","segment","index","text","includes","start","Math","max","end","min","length","contextSegments","slice","context","map","s","join","push","elevation","sx","p","border","borderColor","borderRadius","children","variant","color","align","maxHeight","overflow","disablePadding","result","highlightedText","replace","RegExp","match","divider","flexDirection","alignItems","width","mb","primary","dangerouslySetInnerHTML","__html","primaryTypographyProps","bgcolor","px","size","onClick","offset","alignSelf"],"sources":["C:/Users/ADAM/YT-adskip/YT-adskip-extension/src/components/SearchResults.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport List from '@mui/material/List';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport Button from '@mui/material/Button';\r\nimport Box from '@mui/material/Box';\r\nimport { formatTime } from '../utils/formatTime';\r\n\r\ninterface TranscriptSegment {\r\n  text: string;\r\n  offset: number;\r\n}\r\n\r\ninterface SearchResultsProps {\r\n  transcript: TranscriptSegment[];\r\n  searchQuery: string;\r\n  onTimestampClick: (timestamp: number) => void;\r\n}\r\n\r\nexport const SearchResults: React.FC<SearchResultsProps> = ({\r\n  transcript,\r\n  searchQuery,\r\n  onTimestampClick,\r\n}) => {\r\n  const filteredResults = useMemo(() => {\r\n    if (!searchQuery) return [];\r\n\r\n    const query = searchQuery.toLowerCase();\r\n    const results: (TranscriptSegment & { context: string })[] = [];\r\n    const contextSize = 2; // Number of segments before and after for context\r\n\r\n    transcript.forEach((segment, index) => {\r\n      if (segment.text.toLowerCase().includes(query)) {\r\n        // Get surrounding segments for context\r\n        const start = Math.max(0, index - contextSize);\r\n        const end = Math.min(transcript.length - 1, index + contextSize);\r\n        \r\n        const contextSegments = transcript.slice(start, end + 1);\r\n        const context = contextSegments.map(s => s.text).join(' ');\r\n\r\n        results.push({\r\n          ...segment,\r\n          context\r\n        });\r\n      }\r\n    });\r\n\r\n    return results;\r\n  }, [transcript, searchQuery]);\r\n\r\n  if (!searchQuery) {\r\n    return (\r\n      <Paper \r\n        elevation={0}\r\n        sx={{ \r\n          p: 2,\r\n          border: '1px solid',\r\n          borderColor: 'divider',\r\n          borderRadius: 2\r\n        }}\r\n      >\r\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\r\n          Enter a search term to find specific moments in the video\r\n        </Typography>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  if (filteredResults.length === 0) {\r\n    return (\r\n      <Paper \r\n        elevation={0}\r\n        sx={{ \r\n          p: 2,\r\n          border: '1px solid',\r\n          borderColor: 'divider',\r\n          borderRadius: 2\r\n        }}\r\n      >\r\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\r\n          No results found for \"{searchQuery}\"\r\n        </Typography>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper \r\n      elevation={0}\r\n      sx={{ \r\n        border: '1px solid',\r\n        borderColor: 'divider',\r\n        borderRadius: 2,\r\n        maxHeight: 400,\r\n        overflow: 'auto'\r\n      }}\r\n    >\r\n      <List disablePadding>\r\n        {filteredResults.map((result, index) => {\r\n          const highlightedText = result.context.replace(\r\n            new RegExp(searchQuery, 'gi'),\r\n            match => `<mark>${match}</mark>`\r\n          );\r\n\r\n          return (\r\n            <ListItem \r\n              key={index}\r\n              divider={index !== filteredResults.length - 1}\r\n              sx={{ flexDirection: 'column', alignItems: 'flex-start' }}\r\n            >\r\n              <Box sx={{ width: '100%', mb: 1 }}>\r\n                <ListItemText\r\n                  primary={\r\n                    <div dangerouslySetInnerHTML={{ __html: highlightedText }} />\r\n                  }\r\n                  primaryTypographyProps={{\r\n                    variant: 'body2',\r\n                    sx: {\r\n                      '& mark': {\r\n                        bgcolor: 'warning.light',\r\n                        color: 'warning.contrastText',\r\n                        borderRadius: 0.5,\r\n                        px: 0.5,\r\n                      },\r\n                    },\r\n                  }}\r\n                />\r\n              </Box>\r\n              \r\n              <Button\r\n                size=\"small\"\r\n                variant=\"text\"\r\n                onClick={() => onTimestampClick(result.offset)}\r\n                sx={{ alignSelf: 'flex-end' }}\r\n              >\r\n                Jump to {formatTime(result.offset)}\r\n              </Button>\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n    </Paper>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}