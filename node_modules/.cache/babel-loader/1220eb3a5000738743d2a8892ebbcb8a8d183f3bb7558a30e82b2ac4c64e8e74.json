{"ast":null,"code":"import React,{useMemo,useState}from'react';import Paper from'@mui/material/Paper';import Typography from'@mui/material/Typography';import List from'@mui/material/List';import ListItem from'@mui/material/ListItem';import ListItemText from'@mui/material/ListItemText';import Button from'@mui/material/Button';import Box from'@mui/material/Box';import Collapse from'@mui/material/Collapse';import Divider from'@mui/material/Divider';import KeyboardArrowDownIcon from'@mui/icons-material/KeyboardArrowDown';import KeyboardArrowUpIcon from'@mui/icons-material/KeyboardArrowUp';import Badge from'@mui/material/Badge';import{formatTime}from'../utils/formatTime';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SearchResults=_ref=>{let{transcript,searchQuery,onTimestampClick}=_ref;const[expanded,setExpanded]=useState(true);const toggleExpanded=()=>{setExpanded(!expanded);};const filteredResults=useMemo(()=>{if(!searchQuery)return[];const query=searchQuery.toLowerCase();const results=[];const contextSize=2;// Number of segments before and after for context\ntranscript.forEach((segment,index)=>{if(segment.text.toLowerCase().includes(query)){// Get surrounding segments for context\nconst start=Math.max(0,index-contextSize);const end=Math.min(transcript.length-1,index+contextSize);const contextSegments=transcript.slice(start,end+1);const context=contextSegments.map(s=>s.text).join(' ');results.push({...segment,context});}});return results;},[transcript,searchQuery]);if(!searchQuery){return/*#__PURE__*/_jsx(Paper,{elevation:0,sx:{p:2,border:'1px solid',borderColor:'divider',borderRadius:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",children:\"Enter a search term to find specific moments in the video\"})});}if(filteredResults.length===0){return/*#__PURE__*/_jsx(Paper,{elevation:0,sx:{p:2,border:'1px solid',borderColor:'divider',borderRadius:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",children:[\"No results found for \\\"\",searchQuery,\"\\\"\"]})});}return/*#__PURE__*/_jsxs(Paper,{elevation:0,sx:{p:0,border:'1px solid',borderColor:'divider',borderRadius:2,overflow:'hidden'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',cursor:'pointer',p:2,transition:'background-color 0.2s','&:hover':{bgcolor:'action.hover'}},onClick:toggleExpanded,children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mr:1},children:\"Search Results\"}),/*#__PURE__*/_jsx(Badge,{badgeContent:filteredResults.length,color:\"primary\",sx:{'& .MuiBadge-badge':{fontSize:'0.7rem'}}})]}),expanded?/*#__PURE__*/_jsx(KeyboardArrowUpIcon,{fontSize:\"small\",color:\"action\"}):/*#__PURE__*/_jsx(KeyboardArrowDownIcon,{fontSize:\"small\",color:\"action\"})]}),expanded&&/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Collapse,{in:expanded,timeout:\"auto\",children:/*#__PURE__*/_jsx(List,{disablePadding:true,sx:{maxHeight:400,overflow:'auto'},children:filteredResults.map((result,index)=>{const highlightedText=result.context.replace(new RegExp(searchQuery,'gi'),match=>`<mark>${match}</mark>`);return/*#__PURE__*/_jsxs(ListItem,{divider:index!==filteredResults.length-1,sx:{flexDirection:'column',alignItems:'flex-start'},children:[/*#__PURE__*/_jsx(Box,{sx:{width:'100%',mb:1},children:/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:highlightedText}}),primaryTypographyProps:{variant:'body2',sx:{'& mark':{bgcolor:'warning.light',color:'warning.contrastText',borderRadius:0.5,px:0.5}}}})}),/*#__PURE__*/_jsxs(Button,{size:\"small\",variant:\"text\",onClick:()=>onTimestampClick(result.offset),sx:{alignSelf:'flex-end'},children:[\"Jump to \",formatTime(result.offset)]})]},index);})})})]});};","map":{"version":3,"names":["React","useMemo","useState","Paper","Typography","List","ListItem","ListItemText","Button","Box","Collapse","Divider","KeyboardArrowDownIcon","KeyboardArrowUpIcon","Badge","formatTime","jsx","_jsx","jsxs","_jsxs","SearchResults","_ref","transcript","searchQuery","onTimestampClick","expanded","setExpanded","toggleExpanded","filteredResults","query","toLowerCase","results","contextSize","forEach","segment","index","text","includes","start","Math","max","end","min","length","contextSegments","slice","context","map","s","join","push","elevation","sx","p","border","borderColor","borderRadius","children","variant","color","align","overflow","display","justifyContent","alignItems","cursor","transition","bgcolor","onClick","mr","badgeContent","fontSize","in","timeout","disablePadding","maxHeight","result","highlightedText","replace","RegExp","match","divider","flexDirection","width","mb","primary","dangerouslySetInnerHTML","__html","primaryTypographyProps","px","size","offset","alignSelf"],"sources":["C:/Users/ADAM/YT-adskip/YT-adskip-extension/src/components/SearchResults.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport List from '@mui/material/List';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport Button from '@mui/material/Button';\r\nimport Box from '@mui/material/Box';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport Divider from '@mui/material/Divider';\r\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\r\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport Badge from '@mui/material/Badge';\r\nimport { formatTime } from '../utils/formatTime';\r\n\r\ninterface TranscriptSegment {\r\n  text: string;\r\n  offset: number;\r\n}\r\n\r\ninterface SearchResultsProps {\r\n  transcript: TranscriptSegment[];\r\n  searchQuery: string;\r\n  onTimestampClick: (timestamp: number) => void;\r\n}\r\n\r\nexport const SearchResults: React.FC<SearchResultsProps> = ({\r\n  transcript,\r\n  searchQuery,\r\n  onTimestampClick,\r\n}) => {\r\n  const [expanded, setExpanded] = useState(true);\r\n\r\n  const toggleExpanded = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n  \r\n  const filteredResults = useMemo(() => {\r\n    if (!searchQuery) return [];\r\n\r\n    const query = searchQuery.toLowerCase();\r\n    const results: (TranscriptSegment & { context: string })[] = [];\r\n    const contextSize = 2; // Number of segments before and after for context\r\n\r\n    transcript.forEach((segment, index) => {\r\n      if (segment.text.toLowerCase().includes(query)) {\r\n        // Get surrounding segments for context\r\n        const start = Math.max(0, index - contextSize);\r\n        const end = Math.min(transcript.length - 1, index + contextSize);\r\n        \r\n        const contextSegments = transcript.slice(start, end + 1);\r\n        const context = contextSegments.map(s => s.text).join(' ');\r\n\r\n        results.push({\r\n          ...segment,\r\n          context\r\n        });\r\n      }\r\n    });\r\n\r\n    return results;\r\n  }, [transcript, searchQuery]);\r\n\r\n  if (!searchQuery) {\r\n    return (\r\n      <Paper \r\n        elevation={0}\r\n        sx={{ \r\n          p: 2,\r\n          border: '1px solid',\r\n          borderColor: 'divider',\r\n          borderRadius: 2\r\n        }}\r\n      >\r\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\r\n          Enter a search term to find specific moments in the video\r\n        </Typography>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  if (filteredResults.length === 0) {\r\n    return (\r\n      <Paper \r\n        elevation={0}\r\n        sx={{ \r\n          p: 2,\r\n          border: '1px solid',\r\n          borderColor: 'divider',\r\n          borderRadius: 2\r\n        }}\r\n      >\r\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\r\n          No results found for \"{searchQuery}\"\r\n        </Typography>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper \r\n      elevation={0}\r\n      sx={{ \r\n        p: 0,\r\n        border: '1px solid',\r\n        borderColor: 'divider',\r\n        borderRadius: 2,\r\n        overflow: 'hidden'\r\n      }}\r\n    >\r\n      <Box \r\n        sx={{ \r\n          display: 'flex', \r\n          justifyContent: 'space-between', \r\n          alignItems: 'center',\r\n          cursor: 'pointer',\r\n          p: 2,\r\n          transition: 'background-color 0.2s',\r\n          '&:hover': {\r\n            bgcolor: 'action.hover',\r\n          }\r\n        }}\r\n        onClick={toggleExpanded}\r\n      >\r\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n          <Typography variant=\"subtitle2\" sx={{ mr: 1 }}>\r\n            Search Results\r\n          </Typography>\r\n          <Badge \r\n            badgeContent={filteredResults.length} \r\n            color=\"primary\"\r\n            sx={{ '& .MuiBadge-badge': { fontSize: '0.7rem' } }}\r\n          />\r\n        </Box>\r\n        \r\n        {expanded ? \r\n          <KeyboardArrowUpIcon fontSize=\"small\" color=\"action\" /> : \r\n          <KeyboardArrowDownIcon fontSize=\"small\" color=\"action\" />\r\n        }\r\n      </Box>\r\n      \r\n      {expanded && <Divider />}\r\n      \r\n      <Collapse in={expanded} timeout=\"auto\">\r\n        <List \r\n          disablePadding\r\n          sx={{ \r\n            maxHeight: 400,\r\n            overflow: 'auto'\r\n          }}\r\n        >\r\n          {filteredResults.map((result, index) => {\r\n            const highlightedText = result.context.replace(\r\n              new RegExp(searchQuery, 'gi'),\r\n              match => `<mark>${match}</mark>`\r\n            );\r\n\r\n            return (\r\n              <ListItem \r\n                key={index}\r\n                divider={index !== filteredResults.length - 1}\r\n                sx={{ flexDirection: 'column', alignItems: 'flex-start' }}\r\n              >\r\n                <Box sx={{ width: '100%', mb: 1 }}>\r\n                  <ListItemText\r\n                    primary={\r\n                      <div dangerouslySetInnerHTML={{ __html: highlightedText }} />\r\n                    }\r\n                    primaryTypographyProps={{\r\n                      variant: 'body2',\r\n                      sx: {\r\n                        '& mark': {\r\n                          bgcolor: 'warning.light',\r\n                          color: 'warning.contrastText',\r\n                          borderRadius: 0.5,\r\n                          px: 0.5,\r\n                        },\r\n                      },\r\n                    }}\r\n                  />\r\n                </Box>\r\n                \r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"text\"\r\n                  onClick={() => onTimestampClick(result.offset)}\r\n                  sx={{ alignSelf: 'flex-end' }}\r\n                >\r\n                  Jump to {formatTime(result.offset)}\r\n                </Button>\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n      </Collapse>\r\n    </Paper>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}