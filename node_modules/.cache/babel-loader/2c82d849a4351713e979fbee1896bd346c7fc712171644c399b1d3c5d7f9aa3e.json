{"ast":null,"code":"const CACHE_PREFIX='yt-adskip-cache-';const SETTINGS_KEY='yt-adskip-settings';const CACHE_TTL=24*60*60*1000;// 24 hours in milliseconds\n// Default settings\nconst defaultSettings={autoSkipEnabled:false};export const cacheService={get:videoId=>{try{const cacheKey=CACHE_PREFIX+videoId;const cachedData=localStorage.getItem(cacheKey);if(!cachedData)return null;const entry=JSON.parse(cachedData);const now=Date.now();// Check if cache is expired\nif(now-entry.timestamp>CACHE_TTL){localStorage.removeItem(cacheKey);return null;}return entry.data;}catch(error){console.error('Cache read error:',error);return null;}},set:(videoId,data)=>{try{const cacheKey=CACHE_PREFIX+videoId;const entry={data,timestamp:Date.now()};localStorage.setItem(cacheKey,JSON.stringify(entry));}catch(error){console.error('Cache write error:',error);}},clear:videoId=>{try{const cacheKey=CACHE_PREFIX+videoId;localStorage.removeItem(cacheKey);}catch(error){console.error('Cache clear error:',error);}},// Settings management\ngetSettings:()=>{try{const settingsData=localStorage.getItem(SETTINGS_KEY);if(!settingsData)return{...defaultSettings};return{...defaultSettings,...JSON.parse(settingsData)};}catch(error){console.error('Settings read error:',error);return{...defaultSettings};}},updateSettings:settings=>{try{const currentSettings=cacheService.getSettings();const updatedSettings={...currentSettings,...settings};localStorage.setItem(SETTINGS_KEY,JSON.stringify(updatedSettings));return updatedSettings;}catch(error){console.error('Settings write error:',error);return cacheService.getSettings();}}};","map":{"version":3,"names":["CACHE_PREFIX","SETTINGS_KEY","CACHE_TTL","defaultSettings","autoSkipEnabled","cacheService","get","videoId","cacheKey","cachedData","localStorage","getItem","entry","JSON","parse","now","Date","timestamp","removeItem","data","error","console","set","setItem","stringify","clear","getSettings","settingsData","updateSettings","settings","currentSettings","updatedSettings"],"sources":["C:/Users/ADAM/YT-adskip/YT-adskip-extension/src/utils/cache.ts"],"sourcesContent":["import { VideoData } from './useVideoData';\r\n\r\nconst CACHE_PREFIX = 'yt-adskip-cache-';\r\nconst SETTINGS_KEY = 'yt-adskip-settings';\r\nconst CACHE_TTL = 24 * 60 * 60 * 1000; // 24 hours in milliseconds\r\n\r\ninterface CacheEntry {\r\n  data: VideoData;\r\n  timestamp: number;\r\n}\r\n\r\ninterface Settings {\r\n  autoSkipEnabled: boolean;\r\n}\r\n\r\n// Default settings\r\nconst defaultSettings: Settings = {\r\n  autoSkipEnabled: false\r\n};\r\n\r\nexport const cacheService = {\r\n  get: (videoId: string): VideoData | null => {\r\n    try {\r\n      const cacheKey = CACHE_PREFIX + videoId;\r\n      const cachedData = localStorage.getItem(cacheKey);\r\n      \r\n      if (!cachedData) return null;\r\n      \r\n      const entry: CacheEntry = JSON.parse(cachedData);\r\n      const now = Date.now();\r\n      \r\n      // Check if cache is expired\r\n      if (now - entry.timestamp > CACHE_TTL) {\r\n        localStorage.removeItem(cacheKey);\r\n        return null;\r\n      }\r\n      \r\n      return entry.data;\r\n    } catch (error) {\r\n      console.error('Cache read error:', error);\r\n      return null;\r\n    }\r\n  },\r\n  \r\n  set: (videoId: string, data: VideoData): void => {\r\n    try {\r\n      const cacheKey = CACHE_PREFIX + videoId;\r\n      const entry: CacheEntry = {\r\n        data,\r\n        timestamp: Date.now(),\r\n      };\r\n      \r\n      localStorage.setItem(cacheKey, JSON.stringify(entry));\r\n    } catch (error) {\r\n      console.error('Cache write error:', error);\r\n    }\r\n  },\r\n  \r\n  clear: (videoId: string): void => {\r\n    try {\r\n      const cacheKey = CACHE_PREFIX + videoId;\r\n      localStorage.removeItem(cacheKey);\r\n    } catch (error) {\r\n      console.error('Cache clear error:', error);\r\n    }\r\n  },\r\n\r\n  // Settings management\r\n  getSettings: (): Settings => {\r\n    try {\r\n      const settingsData = localStorage.getItem(SETTINGS_KEY);\r\n      if (!settingsData) return { ...defaultSettings };\r\n      return { ...defaultSettings, ...JSON.parse(settingsData) };\r\n    } catch (error) {\r\n      console.error('Settings read error:', error);\r\n      return { ...defaultSettings };\r\n    }\r\n  },\r\n\r\n  updateSettings: (settings: Partial<Settings>): Settings => {\r\n    try {\r\n      const currentSettings = cacheService.getSettings();\r\n      const updatedSettings = { ...currentSettings, ...settings };\r\n      localStorage.setItem(SETTINGS_KEY, JSON.stringify(updatedSettings));\r\n      return updatedSettings;\r\n    } catch (error) {\r\n      console.error('Settings write error:', error);\r\n      return cacheService.getSettings();\r\n    }\r\n  }\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}