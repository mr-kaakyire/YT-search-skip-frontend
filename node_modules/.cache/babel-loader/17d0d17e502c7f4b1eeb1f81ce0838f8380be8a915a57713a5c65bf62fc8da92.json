{"ast":null,"code":"import{useState}from'react';import{cacheService}from'./cache';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:3000';export const useVideoData=()=>{const[data,setData]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const fetchData=async videoId=>{try{// Check cache first\nconst cachedData=cacheService.get(videoId);if(cachedData){setData(cachedData);return;}setLoading(true);setError(null);const response=await fetch(`${API_URL}/analyze-video`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({videoUrl:`https://www.youtube.com/watch?v=${videoId}`})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to fetch video data');}const result=await response.json();// Cache the result\ncacheService.set(videoId,result);setData(result);}catch(err){setError(err instanceof Error?err.message:'An unexpected error occurred');setData(null);}finally{setLoading(false);}};return{data,loading,error,fetchData};};","map":{"version":3,"names":["useState","cacheService","API_URL","process","env","REACT_APP_API_URL","useVideoData","data","setData","loading","setLoading","error","setError","fetchData","videoId","cachedData","get","response","fetch","method","headers","body","JSON","stringify","videoUrl","ok","errorData","json","Error","result","set","err","message"],"sources":["C:/Users/ADAM/YT-adskip/YT-adskip-extension/src/utils/useVideoData.ts"],"sourcesContent":["import { useState } from 'react';\r\nimport { cacheService } from './cache';\r\n\r\ninterface TranscriptSegment {\r\n  text: string;\r\n  offset: number;\r\n}\r\n\r\nexport interface AdSegment {\r\n  start: number;\r\n  end: number;\r\n  text: string;\r\n}\r\n\r\nexport interface VideoData {\r\n  transcript: TranscriptSegment[];\r\n  adSegments: AdSegment[];\r\n}\r\n\r\ninterface UseVideoDataReturn {\r\n  data: VideoData | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  fetchData: (videoId: string) => Promise<void>;\r\n}\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000';\r\n\r\nexport const useVideoData = (): UseVideoDataReturn => {\r\n  const [data, setData] = useState<VideoData | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchData = async (videoId: string) => {\r\n    try {\r\n      // Check cache first\r\n      const cachedData = cacheService.get(videoId);\r\n      if (cachedData) {\r\n        setData(cachedData);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch(`${API_URL}/analyze-video`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          videoUrl: `https://www.youtube.com/watch?v=${videoId}`,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to fetch video data');\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      // Cache the result\r\n      cacheService.set(videoId, result);\r\n      setData(result);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An unexpected error occurred');\r\n      setData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    data,\r\n    loading,\r\n    error,\r\n    fetchData,\r\n  };\r\n}; "],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,YAAY,KAAQ,SAAS,CAyBtC,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAExE,MAAO,MAAM,CAAAC,YAAY,CAAGA,CAAA,GAA0B,CACpD,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAmB,IAAI,CAAC,CACxD,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAa,SAAS,CAAG,KAAO,CAAAC,OAAe,EAAK,CAC3C,GAAI,CACF;AACA,KAAM,CAAAC,UAAU,CAAGd,YAAY,CAACe,GAAG,CAACF,OAAO,CAAC,CAC5C,GAAIC,UAAU,CAAE,CACdP,OAAO,CAACO,UAAU,CAAC,CACnB,OACF,CAEAL,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,OAAO,gBAAgB,CAAE,CACvDiB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,QAAQ,CAAE,mCAAmCV,OAAO,EACtD,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACG,QAAQ,CAACQ,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAC,KAAK,CAACF,SAAS,CAACf,KAAK,EAAI,4BAA4B,CAAC,CAClE,CAEA,KAAM,CAAAkB,MAAM,CAAG,KAAM,CAAAZ,QAAQ,CAACU,IAAI,CAAC,CAAC,CAEpC;AACA1B,YAAY,CAAC6B,GAAG,CAAChB,OAAO,CAAEe,MAAM,CAAC,CACjCrB,OAAO,CAACqB,MAAM,CAAC,CACjB,CAAE,MAAOE,GAAG,CAAE,CACZnB,QAAQ,CAACmB,GAAG,WAAY,CAAAH,KAAK,CAAGG,GAAG,CAACC,OAAO,CAAG,8BAA8B,CAAC,CAC7ExB,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,MAAO,CACLH,IAAI,CACJE,OAAO,CACPE,KAAK,CACLE,SACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}